

template scroll_widget
	#disabled
	span 2
    width 640
    height 480
    color red

	node outer_body
        hfill 1.0
        vfill 1.0
        hexpand 1.0
        vexpand 1.0
		width 0
		height 0
		color grey

		node body
			draggable
			pressable

			script
				set self.vscroll 12
				var start;
				self.add_event_listener "press_begin" [fn () { set start self.vscroll }]
				self.add_event_listener "press_end" [fn () { set start self.vscroll }]

				self.add_event_listener "click" [fn () {
					set self.vscroll (+ self.vscroll 11)
					println self.vscroll

				}]
				self.add_event_listener "drag_y" [fn (px scale) {
					#set self.vscroll (clamp (+ start px) 0.0 1.0)

					#println px

					#set self.vscroll (+ self.vscroll 1)
				}]
    node scroll_vbar
        vfill 1.0
		span 1

		node scroll_vbar_up
			color gold
			hfill 1.0
			height 20

		node scroll_vbar_inner
			vexpand 1.0
			vfill 1.0
			color dark_grey

			node scroll_vthumb
				color white
				width 20
				height 20
				draggable
				pressable
				press_always

				script
					set self.valign 0.0
					var start;
					self.add_event_listener "press_begin" [fn () { set start self.valign }]
					self.add_event_listener "press_end" [fn () { set start self.valign }]

					self.add_event_listener "drag_y" [fn (px scale) {
						set self.valign (clamp (+ start scale) 0.0 1.0)
					}]
		node scroll_vbar_down
			color gold
			hfill 1.0
			height 20

	node scroll_hbar
        hfill 1.0

		node scroll_hbar_left
			color gold
			vfill 1.0
			width 20

		node scroll_hbar_inner
			hexpand 1.0
			hfill 1.0
			color dark_grey

			node scroll_hthumb
				color white
				width 20
				height 20
				draggable
				pressable
				press_always

				script
					set self.halign 0.0
					var start;
					self.add_event_listener "press_begin" [fn () { set start self.halign }]
					self.add_event_listener "press_end" [fn () { set start self.halign }]

					self.add_event_listener "drag_x" [fn (px scale) {
						set self.halign (clamp (+ start scale) 0.0 1.0)
					}]

		node scroll_hbar_right
			color gold
			vfill 1.0
			width 20

	node scroll_corner
		color light_grey
		hfill 1.0
		vfill 1.0


stub thing

	node
		width 50
		height 50
		color blue
node
    template scroll_widget

    apply body

        span 20
        gap 10

        script
            for i 0 (* 20 12) {
                call stub_thing self
            }

